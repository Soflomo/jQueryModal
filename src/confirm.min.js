(function(b){b.fn.confirm=function(e,c){var e=b.extend({},b.fn.confirm.defaults,e),c=b.extend({},c);b(this).click(function(f){f.preventDefault();var g=b(this),d=e.template;if(d===undefined){if(g.data("template")===undefined){throw"Template required"}else{d=g.data("template")}}if("#"===d.charAt(0)){a(g,b(d),e,c)}else{b.ajax(d,{error:function(h,j,i){throw"Error during request for template"},success:function(h){a(g,b("<div>").html(h),e,c)}})}});return this};function a(f,g,c,e){var h={};if(c.title===undefined){if(f.data("title")!==undefined){c.title=f.data("title")}else{c.title=f.text()}}h[c.cancel]=function(){g.dialog("close")};h[c.success]=function(){if(c.ajax){b.ajax(f.attr("href"),{type:c.method,error:function(i,k,j){c.onError(f,i,k,j)},success:function(j,k,i){c.onSuccess(f,j,k,i)}})}else{window.location.href=f.attr("href")}g.dialog("close")};var d=b.fn.confirm.templator(g.html(),f.data());g.html(d);if(e.title===undefined){e.title=c.title}e.buttons=h;g.dialog(e)}b.fn.confirm.templator=function(c,f){for(var d in f){var g=f[d],e="%"+d+"%";c=c.replace(e,g)}return c};b.fn.confirm.defaults={success:"Success",cancel:"Cancel",ajax:true,method:"GET",onSuccess:function(){},onError:function(){}}})(jQuery);